<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Your converted HTML file</title>
  </head>

  <body>
    <h2>Conversion complete üéâ</h2>
    <p><a href="{{ file_url }}">Download the generated HTML</a></p>

    <!-- ‚òëÔ∏è SQL-Injection hidden as a ‚ÄúDebug console‚Äù -->
    <details style="margin-top: 2rem">
      <summary style="cursor: pointer">Debug console</summary>

      <form id="logForm" style="margin-top: 1rem">
        <label
          >WHERE clause:&nbsp;
          <input type="text" name="where" placeholder="level='INFO'" />
        </label>
        <button type="submit">Load logs</button>
      </form>

      <div
        id="logResults"
        style="font-family: monospace; margin-top: 1rem"
      ></div>
    </details>

    <script>
      document.getElementById("logForm").addEventListener("submit", (e) => {
        e.preventDefault();
        const where = e.target.where.value;
        fetch("/logs?query=" + encodeURIComponent(where))
          .then((r) => r.text())
          .then(
            (html) => (document.getElementById("logResults").innerHTML = html)
          );
      });
    </script>

    <p><a href="/">‚Üê Back to home</a></p>
  </body>
</html>
