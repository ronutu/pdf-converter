<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>PDF → HTML Converter</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
  </head>

  <body>
    <!-- logo fetch = path-traversal surface (unchanged) -->
    <img
      src="/image?filename=static/images/logo.png"
      alt="Site Logo"
      width="180"
    />

    <!-- ============== normal “upload” feature (unchanged) ============== -->
    <h2>Upload & convert</h2>
    <form action="/upload" method="post" enctype="multipart/form-data">
      <input type="file" name="file" /><br /><br />
      <label>
        Page # (first page = 1):
        <input
          type="number"
          name="page"
          min="1"
          value="1"
          style="width: 70px"
        /> </label
      ><br /><br />
      <button type="submit">Upload</button>
    </form>

    <!-- ============== ✨  HIDDEN / “innocent” FEATURES  ✨ ============== -->

    <!-- 1. Reflected-XSS sink (search bar) -->
    <form method="get" action="/" style="margin-top: 3rem">
      <input type="text" name="search" placeholder="Site search" />
      <button type="submit">Search</button>
    </form>

    <!-- Where the server echoes the search term *without escaping* -->
    <p id="srch">{{ searched|safe }}</p>

    <!-- 2. DOM-based XSS (hash fragment injected into the *same* page) -->
    <script>
      // runs once at page-load, exactly like the old domxss.html demo
      const domPayload = decodeURIComponent(location.hash.slice(1));
      if (domPayload) {
        document.getElementById("srch").innerHTML = domPayload;
      }
    </script>

    <!-- 3. “Hidden” link to SQL-Injection endpoint -->
    <a id="dbg" href="/logs?query=1=1--" style="display: none">debug</a>
  </body>
</html>
